import { ref } from 'vue'\nimport { useToast } from 'vue-toastification'\nimport { useStorage } from './useStorage'\nimport { SETTINGS_CONFIG } from '../utils/constants'\n\nexport function useSettings() {\n  const toast = useToast()\n  const { saveData, loadData } = useStorage()\n  \n  const soundEnabled = ref(SETTINGS_CONFIG.DEFAULT.SOUND_ENABLED)\n  const confettiEnabled = ref(SETTINGS_CONFIG.DEFAULT.CONFETTI_ENABLED)\n  const spinDuration = ref(SETTINGS_CONFIG.DEFAULT.SPIN_DURATION)\n  \n  const toggleSound = () => {\n    soundEnabled.value = !soundEnabled.value\n    toast.info(soundEnabled.value ? 'Sound enabled' : 'Sound disabled')\n    saveSettings()\n  }\n  \n  const toggleConfetti = () => {\n    confettiEnabled.value = !confettiEnabled.value\n    toast.info(confettiEnabled.value ? 'Confetti enabled' : 'Confetti disabled')\n    saveSettings()\n  }\n  \n  const updateSpinDuration = (duration) => {\n    spinDuration.value = Math.max(\n      SETTINGS_CONFIG.SPIN_DURATION.MIN,\n      Math.min(SETTINGS_CONFIG.SPIN_DURATION.MAX, duration)\n    )\n    saveSettings()\n  }\n  \n  const saveSettings = () => {\n    const settings = {\n      soundEnabled: soundEnabled.value,\n      confettiEnabled: confettiEnabled.value,\n      spinDuration: spinDuration.value\n    }\n    saveData('settings', settings)\n  }\n  \n  const loadSettings = () => {\n    const saved = loadData('settings')\n    if (saved) {\n      soundEnabled.value = saved.soundEnabled ?? SETTINGS_CONFIG.DEFAULT.SOUND_ENABLED\n      confettiEnabled.value = saved.confettiEnabled ?? SETTINGS_CONFIG.DEFAULT.CONFETTI_ENABLED\n      spinDuration.value = saved.spinDuration ?? SETTINGS_CONFIG.DEFAULT.SPIN_DURATION\n    }\n  }\n  \n  return {\n    soundEnabled,\n    confettiEnabled,\n    spinDuration,\n    toggleSound,\n    toggleConfetti,\n    updateSpinDuration,\n    loadSettings\n  }\n}"